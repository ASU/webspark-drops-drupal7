<?php

require_once drupal_get_path('module', 'webspark_warranty') . '/includes/webspark_warranty.fetch.inc';
require_once drupal_get_path('module', 'webspark_warranty') . '/includes/webspark_warranty.misc.inc';

/**
 * Implements hook_menu().
 */
function webspark_warranty_menu()
{
  $items['admin/reports/warranty'] = array
  (
    'title' => 'Warranty Status',
    'description' => 'Check the status of your site pertaining to the Webspark warranty',
    'page callback' => 'webspark_warranty_status_page',
    'file' => 'webspark_warranty.view.inc',
    'file path' => drupal_get_path('module', 'webspark_warranty') . '/views/',
    'access callback' => TRUE,
    'type' => MENU_NORMAL_ITEM
  );

  return $items;
}

/**
 * Implements hook_block_info().
 */
function webspark_warranty_block_info()
{
  $blocks['warranty_status'] = array(
    'info'  =>  t('Warranty Status')
  );

  return $blocks;
}

/**
 * Implements hook_block_view().
 */
function webspark_warranty_block_view($delta = '')
{
  $currentStatus = webspark_warranty_get_warranty_status();

  switch ($delta)
  {
    case 'warranty_status':
      $block['subject'] = t('Subject of Webspark Warranty:');
      $block['content'] = t("<h1><strong>" . $currentStatus . "</strong></h1>");

      break;
  }

  return $block;
}
